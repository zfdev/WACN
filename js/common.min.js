var Common=function(t,n,e,i){"use strict";var a=(n.debug.log,{breakPoint:{min:{mobile:320,tablet:768,desktop:980,large:1280},max:{mobile:321,tablet:769,desktop:981,large:1281}},AJAXRequestPrefix:"api-"}),o=!1,s=!1,r=!1,c=t(e),l=t(i);!function(t){var n=t({});t.subscribe=function(){n.on.apply(n,arguments)},t.unsubscribe=function(){n.off.apply(n,arguments)},t.publish=function(){n.trigger.apply(n,arguments)}}(t);var u=function(){var n=function(){e.matchMedia&&(o=e.matchMedia("only screen and (max-width: "+a.breakPoint.max.tablet+"px)").matches,s=e.matchMedia("only screen and (min-width: "+a.breakPoint.min.tablet+"px) and (max-width: "+a.breakPoint.max.desktop+"px)").matches,r=e.matchMedia("only screen and (min-width: "+a.breakPoint.min.desktop+"px)").matches)},i=t.Callbacks(),l=i.add,u=function(){n()};return c.on("resize",function(){n(),i.fire()}),{add:l,init:u}}(),h=function(){var n={},e={maxHeight:520,selector:".auto-height"},i=function(n){this.o$Container=t(n),this.aChildDomArr=o(t(n)),this.bEnble=!1,this.update()};i.prototype.update=function(){if(!r)return this.reset(),void(this.bEnble=!1);this.bEnble=!0;var n=this.o$Container,e=this.aChildDomArr,i=s(e),o=a(i);n.css("height",o),t.each(e,function(){t(this).css("height",o)})},i.prototype.reset=function(){this.bEnble&&(this.o$Container.css("height","auto"),t.each(this.aChildDomArr,function(){t(this).css("height","auto")}))};var a=function(t){return Math.max.apply(null,t)},o=function(n){var e=[],i=n.data("child"),a=i.split("|");return t.each(a,function(){var i=n.find(this);i.length>1?i.each(function(){e.push(t(this))}):e.push(i)}),e},s=function(e){var i=[];return t.each(e,function(){var e=t(this).innerHeight();e>=n.maxHeight&&(e=n.maxHeight,t(this).addClass("scrollable")),i.push(e)}),i},c=function(){t.each(l,function(){this.update()})},l=[],u=function(a){n=t.extend({},e,a),t(n.selector).each(function(){var t=new i(this);l.push(t)})};return{update:c,init:u}}(),d=function(){var n=t("body"),e=function(){n.hasClass("no-scroll")||n.addClass("no-scroll")},i=function(){n.hasClass("no-scroll")&&n.removeClass("no-scroll")},a=function(){};return{noScroll:e,scroll:i,init:a}}(),f=function(){var e,i=t(".header"),a={autoHideHeight:150},o=function(){i.addClass("hide")},s=function(){i.removeClass("hide")},l=function(t){if(!r){var n=c.scrollTop();t>0?n>=a.autoHideHeight&&o():s()}},u=function(){e=c.scrollTop(),c.on("scroll",n.throttle(function(){var t=c.scrollTop(),n=t-e;return 0===n?!1:(l(n),void(e=t))}))};return{init:u}}(),p=function(){var n={},e={openCall:null,closeCall:null},i=t(".search-panel"),a=t(".top-nav .search .icon"),o=function(){return i.hasClass("show")?c():s(),!1},s=function(){r&&t("#searchInput").trigger("focus"),i.addClass("show"),r||a.removeClass("icon-search").addClass("icon-close"),d.noScroll(),n.openCall&&n.openCall()},c=function(){i.removeClass("show"),a.addClass("icon-search").removeClass("icon-close"),d.scroll(),n.closeCall&&n.closeCall()},u=function(){r&&c()},h=function(i){n=t.extend({},e,i),l.on("click",".search,.search-cancel a",o),l.on("blur","#searchInput",u)};return{open:s,close:c,init:h}}(),v=function(){var n={},i={beforeSearch:null,$input:t("#searchInput"),searchRequestUrl:"/searchresults/?query="},a=function(t){var n=/^\s+$/g;return n.test(t)||""===t},o=function(){var t=n.$input.val();if(!a(t)){var i=n.searchRequestUrl+encodeURIComponent(t);n.beforeSearch&&n.beforeSearch(t),e.location=i}},s=function(){c.on("keyup",function(t){"13"==t.keyCode&&o()})},r=function(e){n=t.extend({},i,e),s()};return{init:r}}(),m=function(){var e=function(){this.defaults={keywordCountLimit:10,localDataName:"searchHistory",$container:t(".search-history ul"),$clearButton:t(".search-history .clear-btn"),searchRequestUrl:"/searchresults/?query="},this.template='<li><a class="text-limit" href="<%=url%>" title="<%=keyword%>"><%=keyword%></a></li>'};e.prototype.init=function(n){this.config=t.extend({},this.defaults,n),this.bind(),this.update()},e.prototype.update=function(){this._fGetLocalKeywords(),this.render()},e.prototype.render=function(){var e="",i=this,a=this._fGetLocalKeywords();t.each(a,function(){e+=n.Template(i.template,{url:i.config.searchRequestUrl+encodeURIComponent(this),keyword:this})}),this.config.$container.empty(),this.config.$container.append(e)},e.prototype._find=function(n){var e=this._fGetLocalKeywords();return t.inArray(n,e)},e.prototype.save=function(t){if(-1==this._find(t)){var e=this._fGetLocalKeywords();e.length<this.config.keywordCountLimit?e.unshift(t):(e.pop(),e.unshift(t)),n.Storage.set(this.config.localDataName,e),this.update()}},e.prototype.clearAll=function(t){var e=t.data;return n.Storage.clear(e.config.localDataName),e.update(),!1},e.prototype.bind=function(){var t=this;l.on("click",t.config.$clearButton.selector,t,t.clearAll)},e.prototype._fGetLocalKeywords=function(){return n.Storage.get(this.config.localDataName)||[]};var i=new e,a=function(){i.init()},o=function(t){i.save(t)};return{save:o,init:a}}(),g=function(){var e={},i={$container:t(".search-panel .hot-tag"),requestUrl:"/"+a.AJAXRequestPrefix+"hotkeywords",requestParam:"topK",keywordsCount:9,searchUrl:"/searchresults/?query=",template:'<div class="col-xs-6 col-sm-4"><a class="btn btn-link btn-block btn-default text-limit" href="<%=url%>" title="<%=keyword%>"><%=keyword%></a></div>'},o=function(i){var a="";return t.each(i,function(){var t=this,i=e.searchUrl+encodeURIComponent(t);a+=n.Template(e.template,{url:i,keyword:t})}),a},s=function(t){e.$container.empty(),e.$container.append(t)},r=function(){var n={};n[e.requestParam]=e.keywordsCount,t.ajax({url:e.requestUrl,method:"POST",data:n,dataType:"json"}).done(function(t){s(o(t))})},c=function(n){e=t.extend({},i,n),r()};return{init:c}}(),C=function(){var n=t(".nav"),i=t(".nav > ul > li > a"),a=n.find(".panel-wrapper"),o=function(){return n.hasClass("show")?u():s(),!1},s=function(){n.addClass("show"),p.close(),d.noScroll(),t(".nav-toggle>.icon").removeClass("icon-navigation").addClass("icon-close")},c=function(){n.removeClass("show"),i.removeClass("active"),t(".nav-toggle>.icon").addClass("icon-navigation").removeClass("icon-close")},u=function(){c(),d.scroll()},h=function(){return 0==!t(this).next(".panel-wrapper").length?(i.removeClass("active"),t(this).addClass("active"),a.removeClass("show"),t(this).next(".panel-wrapper").addClass("show"),d.noScroll(),!1):void 0},f=function(){r&&(i.removeClass("active"),a.removeClass("show"),u(),d.scroll())},v=function(){a.find("dl").each(function(){var n=t(this),e=n.find("dt").length;e%2&&n.addClass("odd-child"),m(n)})},m=function(){a.find(".menu-child").each(function(){var n=t(this);n.on("mousewheel",function(n){if(t(this).hasClass("scrollable")){var e=n.originalEvent,i=e.wheelDelta||-e.detail;this.scrollTop+=30*(0>i?1:-1),n.preventDefault()}})})},g=function(){t(this).prev("dt").toggleClass("mouse-hover")},C=function(){var n=t(this).prev("dt").find("a").attr("href");return e.location=n,!1},b=function(){var t=e.location.href,i={"/home/features/":"product","/pricing/":"price","/solutions/":"solutions","/partnerancasestudy/":"partnerAndCase","/isv-plan/":"partnerAndCase","/starter-guide/":"document","/video-center/":"document","/documentation/":"document","/develop/":"document","/blog/":"community","/community/":"community","/support/":"support","/icp/":"support"},a=function(){for(var n in i)if(t.indexOf(n)>-1)return i[n]};a()?n.find(".nav-"+a()).addClass("current"):n.find(".nav-index").addClass("current")},y=function(){l.on("click",".nav-toggle",o),l.on("click",".nav > ul > li > a",h),l.on("click",".content",f),l.on("mouseover",".nav .panel-content dl dd",g),l.on("mouseout",".nav .panel-content dl dd",g),l.on("click",".nav .panel-content dl dd",C),v(),m(),b()};return{hide:c,open:s,close:u,init:y}}(),b=function(){var n={},e={showClass:"show-sm show-xs"},i=function(e){var i=t(e.data).find(".menu-title"),a=t(e.data).find(".menu-child"),o=t(this);if(o.hasClass("expand")){if("desktop"==t(e.data).data("tab")&&r)return!1;o.removeClass("expand"),o.next(".menu-child").removeClass(n.showClass)}else i.removeClass("expand"),o.addClass("expand"),a.removeClass(n.showClass),o.next(".menu-child").addClass(n.showClass);return!1},a=function(t){t.on("click.accordian",".menu-title",t,i),o(t)},o=function(e){e.find(".menu-title").each(function(){t(this).hasClass("expand")&&t(this).next(".menu-child").addClass(n.showClass)})},s=function(i){n=t.extend({},e,i),t(".accordian-menu").each(function(){a(t(this)),o(t(this))})};return{init:s}}(),y=function(){var n=function(n){this.o$Container=t(n),this.update()};n.prototype.update=function(){if(!r){var n=t(e).height(),i=0,a=this.o$Container;"string"==typeof a.data("top")&&(i=t("."+a.data("top")).height()),"number"==typeof a.data("top")&&(i=a.data("top"));var o=0;a.children().each(function(){o+=t(this).height()});var s=n-i;o+i>n?(a.addClass("scroll-y"),a.innerHeight(s)):(a.removeClass("scroll-y"),a.css("height","auto"),a.data("fullscreen")&&a.css("height",s))}};var i=[],a=function(){t.each(i,function(){this.update()})},o=function(){t(".auto-scroll").each(function(){var t=new n(this);i.push(t)})};return{update:a,init:o}}(),w=function(){var n=function(n){t(n).on("click.panel",".panel-title .icon-close",function(){return t(this).parents(".panel-wrapper").removeClass("show"),d.scroll(),!1})},e=function(){t(".panel-wrapper").each(function(){n(this)})};return{init:e}}(),k=function(){var n={},e={$tabNav:t(".tab-nav")},i=function(t){this.$tabNavContainer=t};i.prototype.init=function(){this.eventHandler=this.$tabNavContainer.data("event")||"click",this._bind()},i.prototype._bind=function(){var n=this,e=n.eventHandler+".tab";n.$tabNavContainer.find('[data-toggle="tab"]').each(function(){t(this).parent("li").hasClass("active")&&a(t(this))}),n.$tabNavContainer.on(e,'[data-toggle="tab"]',n,o),n.$tabNavContainer.on("touchend",'[data-toggle="tab"]',n,o)};var a=function(n){var e=n.attr("href"),i=/^#\S+/g;i.test(e)&&(t(e).parents(".tab-content").find(".tab-panel").removeClass("show-md"),t(e).addClass("show-md"))},o=function(n){n.data.$tabNavContainer.find("li").removeClass("active"),t(this).parent("li").addClass("active"),a(t(this))},s=function(a){n=t.extend({},e,a),n.$tabNav.each(function(){var n=new i(t(this));n.init()})};return{init:s}}(),$=function(){var n=function(){this.width=0,this.height=0};n.prototype.init=function(n){var e=n.attr("href");this.$link=n,this.$dialog=t(e),this.$dialogContent=this.$dialog.find(".dialog-content"),this.$closeBtn=this.$dialog.find(".dialog-header .close-btn"),this.$mask=this.$dialog.find(".dialog-mask"),this.width=this.$dialog.data("width"),this.height=this.$dialog.data("height"),this._bind(),this.update()},n.prototype.open=function(){this.$dialog.addClass("open")},n.prototype.update=function(){this.$dialogContent.width(this.width),this.$dialogContent.height(this.height),this.$dialogContent.css("margin-left",-this.width/2),this.$dialogContent.css("margin-top",-this.height/2)},n.prototype._bind=function(){var t=this;this.$link.off("click.Dialog"),this.$link.on("click.Dialog.link",function(n){t.open(),n.preventDefault(),n.stopPropagation()}),this.$closeBtn.on("click.Dialog.closeBtn",function(n){t.close(),n.preventDefault(),n.stopPropagation()}),this.$mask.on("click.Dialog.mask",function(){t.close()})},n.prototype.close=function(){this.$dialog.removeClass("open")};var e=function(){t('[data-toggle="dialog"]').each(function(){var e=new n;e.init(t(this))})};return{init:e}}(),x=function(){var t=function(){r||FastClick.attach(i.body)};return{init:t}}();return{init:function(){u.init(),f.init(),d.init(),p.init({openCall:C.hide}),C.init(),y.init(),b.init(),w.init(),h.init(),m.init(),g.init(),v.init({beforeSearch:function(t){m.save(t)}}),k.init(),$.init(),u.add(y.update),u.add(h.update),x.init()}}}(jQuery,AUI,window,document);$(function(){Common.init()});